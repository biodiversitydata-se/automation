- name: Create  mount point for docker data "/docker"
  file:
    path: /docker
    state: directory
    owner: root
    group: root
    mode: 0775
    recurse: yes
- name: Mount docker gluster volume at "/docker"
  ansible.posix.mount:
    src: "{{  deployment_prefix+'-'+groups['storage'][0] }}:/docker"
    fstype: glusterfs
    path: /docker
    state: mounted
- name: Make sure the "/docker" mount point has the correct access rights
  file:
    path: /docker
    owner: root
    group: root
    mode: 0755
    state: directory
- name: Make sure the "/docker" mount point has the correct subdirectories for deployment 
  file:
    path: "/docker/{{item}}"
    owner: root
    group: root
    mode: 0755
    recurse: yes
    state: directory
  with_items:
    - etc
    - usr
    - var/volumes
    - var/backup

